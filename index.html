<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>EbRoShop Header - Fixed</title>

<style>
/* RESET */
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Arial,Helvetica,sans-serif;background:#fff}

/* HEADER */
.header{
  background:#136835;
  height:62px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 16px;
  color:#fff;
}
.left,.right{display:flex;align-items:center;gap:18px}
.icon-btn{cursor:pointer;display:flex;align-items:center}
.icon-btn svg{
  width:22px;height:22px;stroke:#fff;fill:none;stroke-width:2;
}

/* CART BADGE */
.cart{position:relative;}
.badge{
  position:absolute;
  top:-6px;
  right:-6px;
  background:#fff;
  color:#136835;
  width:18px;
  height:18px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:11px;
  font-weight:bold;
  display:none;
}

/* LOGO */
.logo-area{display:flex;align-items:center;gap:10px}
.logo-circle{
  width:42px;height:42px;background:#fff;border-radius:50%;
  display:flex;align-items:center;justify-content:center;padding:5px;
}
.logo-text .main{font-size:20px;font-weight:bold}
.logo-text .sub{font-size:10px;margin-top:2px;text-transform:uppercase}

/* OVERLAY */
#menuOverlay{
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.42);
  display:none;z-index:9;
}

/* SIDE MENU (SLIDE DRAWER) */
#sideMenu{
  position:fixed;
  top:0;
  left:-320px;
  width:320px;
  height:100%;
  background:#fafafa;
  box-shadow:3px 0 8px rgba(0,0,0,0.2);
  z-index:10;
  transition:left .28s ease;
  padding:20px 22px;
  overflow-y:auto;
}

/* MENU SECTIONS */
.menu-title{
  color:#999;
  font-size:14px;
  margin:18px 0 6px;
}

.menu-item{
  display:flex;
  align-items:center;
  gap:12px;
  padding:10px 0;
  font-size:16px;
  color:#000;
  cursor:pointer;
  border-bottom:1px solid #eee;
}
.menu-item svg{
  width:22px;height:22px;stroke:#000;fill:none;stroke-width:1.7;
}

/* LOGIN ROW */
.login-row{
  display:flex;
  align-items:center;
  gap:12px;
  padding:10px 0 20px;
  border-bottom:1px solid #ddd;
}
.login-row .user-icon{
  width:46px;height:46px;border-radius:50%;background:#eee;
  display:flex;align-items:center;justify-content:center;
}
.login-row .user-icon svg{width:28px;height:28px;stroke:#777}

/* CLOSE BUTTON */
.close-btn{
  font-size:26px;
  font-weight:bold;
  cursor:pointer;
  margin-bottom:12px;
  display:inline-block;
}


/* for text header */
@keyframes ticker-scroll{
    0%   { transform: translateX(0%); }
    100% { transform: translateX(-50%); }
  }
@media (max-width:520px){
  .ticker-track{font-size:14px}
}

/* -------------------------
   SEARCH PANEL STYLES
   ------------------------- */
#searchPanel {
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:#fff;
  z-index:9999;
  display:none;
  overflow-y:auto;
  -webkit-overflow-scrolling:touch;
}

.search-top {
  padding:12px;
  display:flex;
  gap:10px;
  align-items:center;
  border-bottom:1px solid #eee;
}

.search-top input {
  flex:1;
  padding:12px;
  font-size:16px;
  border:1px solid #ccc;
  border-radius:8px;
}

.search-close-btn {
  padding:10px 14px;
  background:#136835;
  color:#fff;
  border:none;
  border-radius:8px;
  cursor:pointer;
}

/* product card design (matches your screenshot) */
.products-wrap { padding:14px; }
.products-grid {
  display:flex;
  flex-wrap:wrap;
  gap:12px;
  justify-content:space-between;
}

.product-card {
    width: 48%;
    background:#fff;
    border-radius:14px;
    box-shadow:0 3px 8px rgba(0,0,0,0.07);
    padding-bottom:8px;
    overflow:hidden;
}

.product-card img {
    width:100%;
    height:150px;
    object-fit:cover;
    display:block;
}
.product-name {
  padding:10px;
    font-size:16px;
    font-weight:600;
}
.product-price {
    padding:0 10px;
    font-size:16px;
    font-weight:bold;
    color:#111;
}
.add-btn {
    margin:12px 10px 16px 10px;
    width:calc(100% - 20px);
    padding:10px 0;
    background:#008cff;
    color:#fff;
    border:none;
    font-size:15px;
    border-radius:8px;
    cursor:pointer;
}

/* small responsiveness */
@media (max-width:520px){
  .product-card{width:100%}
  .logo-text .main{font-size:16px}
}





 /* Styling for the specific slides based on the screenshots */
        /* NOTE: REPLACE THESE URLS with the actual paths to your banner images */
        #slide-1 { 
            background-image: url('./Screenshot_20251212_162757_Gallery.jpg'); 
            background-color: #e0f2f7; 
            background-repeat: no-repeat; 
            background-size: 100% auto; /* Adjust to better fit the content */
            background-position: top center;
            background-size: contain;
        }
        #slide-2 { 
            background-image: url('./FoodItems2.jpg'); 
            background-color: #1fc8ea; 
            background-repeat: no-repeat;
            background-size: 100% auto;
            background-position: top center;
            background-size: contain;
            
        }
        #slide-3 { 
            background-image: url('./HealthCare.jpg'); 
            background-color: #e8f5e9; 
            background-repeat: no-repeat; 
            background-size: 100% auto;
            background-position: top center;
            background-size: contain;
    
        }

        /* Specific text colors based on screenshots */
        #slide-1 .banner-title { color: #007bff; text-shadow: none; }
        #slide-1 .banner-subtitle { color: #4a4a4a; text-shadow: none; }
        #slide-2 .banner-title { color: white; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); }
        #slide-2 .banner-subtitle { color: #fccf00; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); }
        #slide-3 .banner-title { color: #333; text-shadow: none; }
        #slide-3 .banner-subtitle { color: #e74c3c; font-size: 1.5em; font-weight: bold; text-shadow: none; }
        #slide-3 .banner-content p { color: #555; text-shadow: none; margin-bottom: 5px;}

        .buy-now-btn:hover {
            background-color: #e68900;
        }

        .category-box:hover {
            transform: scale(1.05);
            box-shadow: 0 0 0 5px rgba(255, 255, 255, 1), 
                        0 0 0 6px #007bff; /* Slight blue highlight on hover */
        }

        
        .centered-dot::before {
            content: '';
            display: inline-block;
            width: 10px;
            height: 10px;
            background-color: #388e3c;
            border-radius: 50%;
        }

        /* --- Media Queries for Responsiveness --- */
        @media (max-width: 768px) {
            .banner { height: 300px; }
            .banner-content { padding-bottom: 30px; }
            .banner-title { font-size: 2.2em; }
            .banner-subtitle { font-size: 1.1em; }
            .buy-now-btn { padding: 10px 20px; }
            
            .category-box {
                width: 80px;
                height: 80px;
            }
        }
        @media (max-width: 480px) {
            .banner { height: 250px; }
            .banner-title { font-size: 1.8em; }
            .buy-now-btn { padding: 8px 15px; font-size: 0.9em; }
            
            .category-box {
                width: 70px;
                height: 70px;
            }
        }

</style>
</head>
<body>

<!-- TOP TICKER -->
<div style=" background:#136835; --white:#ffffff; --muted-white:rgba(255,255,255,0.95);">
  <div style="font-family: Helvetica Neue, Arial, sans-serif; background:#fff;">
    <header style="background:#136835; color:var(--white); width:100%; box-shadow: 0 1px 0 rgba(0,0,0,0.08);" class="site-header" role="banner">
      <div style="overflow:hidden; border-top:1px solid rgba(255,255,255,0.06);" class="ticker-wrap" aria-hidden="false">
        <div style="display:block; width:100%; padding:10px 0;" class="ticker" role="marquee">
          <div style="display:inline-block; white-space:nowrap; will-change:transform; font-weight:600; font-size:16px; color:var(--muted-white); animation: ticker-scroll 10s linear infinite;" class="ticker-track">
            <span style="display:inline-block; padding-right:60px;">Fast delivery all over Addis Abeba. Order Now.</span>
            <span style="display:inline-block; padding-right:60px;">ወዳሉበት በፍጥነት ወዳሉበት እናደርሳለን. አሁኑኑ ይዘዙን</span>
            <span style="padding-left:40px;">Fast delivery all over Addis Abeba. Order Now.</span>
            <span style="padding-left:40px;">ወዳሉበት በፍጥነት ወዳሉበት እናደርሳለን. አሁኑኑ ይዘዙን.</span>
          </div>
        </div>
      </div>
    </header>
  </div>
</div>

<!-- MAIN HEADER -->
<div class="header">
  <div class="left">
    <div class="icon-btn" id="hamburgerBtn" aria-label="Open menu">
      <svg viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
    </div>

    <div class="icon-btn" id="searchBtn" aria-label="Search">
      <svg viewBox="0 0 24 24"><circle cx="11" cy="11" r="6"/><path d="M21 21l-4-4"/></svg>
    </div>
  </div>

  <div class="logo-area">
    <a href="index.html" style="display:flex;align-items:center;text-decoration:none;color:inherit">
      <div class="logo-circle" title="EbRoShop">
        <svg viewBox="0 0 64 64" width="30" height="30" xmlns="http://www.w3.org/2000/svg">
          <path d="M40 4c10 4 10 16 0 20c-4-6-6-14 0-20z" fill="#3fbf4c"/>
          <path d="M20 32a14 14 0 1128 0c0 10-8 14-14 14s-14-4-14-14h20" stroke="#3fbf4c" stroke-width="6" fill="none" stroke-linecap="round"/>
        </svg>
      </div>
      <div class="logo-text" style="margin-left:8px;">
        <div class="main">EbRoShop.com</div>
        <div class="sub">by Ebro Market</div>
      </div>
    </a>
  </div>

  <div class="right">
    <div class="icon-btn" id="accountBtn" aria-label="Account">
      <svg viewBox="0 0 24 24">
        <path d="M12 12a4 4 0 100-8 4 4 0 000 8zM4 20a8 8 0 0116 0"/>
      </svg>
    </div>

    <div class="cart icon-btn" id="cartBtn" aria-label="Cart">
      <svg viewBox="0 0 24 24">
        <path d="M3 3h2l3 12h10l3-8H6"/>
        <circle cx="9" cy="20" r="1"/>
        <circle cx="18" cy="20" r="1"/>
      </svg>
      <div class="badge" id="cartBadge">0</div>
    </div>
  </div>
</div>

<!-- OVERLAY + SIDE MENU -->
<div id="menuOverlay" aria-hidden="true"></div>

<div id="sideMenu" aria-hidden="true">
  <span class="close-btn" id="closeMenu">✖️</span>

  <div class="login-row">
    <div class="user-icon" aria-hidden="true">
      <svg viewBox="0 0 24 24"><path d="M12 12a4 4 0 100-8 4 4 0 000 8zM4 20a8 8 0 0116 0"/></svg>
    </div>
    <div style="font-size:18px;">Login or register</div>
  </div>

  <div class="menu-item">Competitions</div>
  <div class="menu-item">Teams</div>
  <div class="menu-item">Players</div>
  <div class="menu-item">Transfers</div>
  <div class="menu-item">Find match</div>
  <div class="menu-item">Televised</div>
  <div class="menu-title">More</div>
  <div class="menu-item">Remove ads</div>
  <div class="menu-item">Settings</div>
  <div class="menu-item">About us</div>
  <div class="menu-item">Report incidence</div>
  <div class="menu-item">Beta tester</div>
</div>

<!-- SEARCH PANEL -->
<div id="searchPanel" aria-hidden="true">
  <div class="search-top">
    <input id="searchInput" type="text" placeholder="Search products..." aria-label="Search products">
    <button class="search-close-btn" id="closeSearch">Close</button>
  </div>

  <div class="products-wrap">
    <div id="searchResults" class="products-grid">
      <!-- products will render here -->
    </div>
  </div>
</div>




    <div style=" font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            background-color: #f8f8f8; display: contents;/* Light background for the page */">

    <div style="  width: 100%;
            overflow: hidden; /* Hide parts of slides that are not active */
            position: relative;
            padding: 20px 0; /* Vertical padding around the carousel */" class="carousel-container">
        <div style="display: flex;
            transition: transform 0.5s ease-in-out; /* Smooth slide transition */
            width: 300%; /* For 3 slides */" class="carousel-track" id="carouselTrack">
            
            <div style="    flex-shrink: 0; /* Slides don't shrink */
            width: 33.33%; /* Each slide takes 1/3 of the track width */
            padding: 0 10px; /* Space between the container edge and the slide content */" class="carousel-slide">
                <div style="   position: relative;
            height: 400px; /* Fixed height for the banner */
            border-radius: 15px;
            overflow: hidden;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: flex-end; 
            color: white;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);" class="banner" id="slide-1">
                    <div style="  position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 80%;
            display: flex;
            flex-direction: column;
            justify-content: flex-end; /* Align content to the bottom of the banner */
            align-items: center;
            text-align: center;
            padding: 0 20px 40px; /* Push content up from the bottom edge */" class="banner-content">
                         <a href="index.html" style=" display: inline-block;
            padding: 12px 30px;
            background-color: #ff9800; /* Orange color for the button */
            color: white;
            text-decoration: none;
            font-weight: bold;
            border-radius: 50px;
            transition: background-color 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            margin-top: 20px;" class="buy-now-btn">BUY NOW</a>
                    </div>
                </div>
            </div>

            <div style="    flex-shrink: 0; /* Slides don't shrink */
            width: 33.33%; /* Each slide takes 1/3 of the track width */
            padding: 0 10px; /* Space between the container edge and the slide content */" class="carousel-slide">
                <div style="   position: relative;
            height: 400px; /* Fixed height for the banner */
            border-radius: 15px;
            overflow: hidden;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: flex-end; 
            color: white;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);" class="banner" id="slide-2">
                    <div style="  position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 80%;
            display: flex;
            flex-direction: column;
            justify-content: flex-end; /* Align content to the bottom of the banner */
            align-items: center;
            text-align: center;
            padding: 0 20px 40px; /* Push content up from the bottom edge */" class="banner-content">
                        <h2 style="   font-size: 3em;
            font-weight: 800;
            margin-bottom: 30px;
            line-height: 1.0;" class="banner-title">BABY TOYS</h2>
                        <p style="   font-size: 1.2em;
            font-weight: 500;
            margin-bottom: 20px;" class="banner-subtitle">THE SECRET WEAPON AGAINST CRYING</p>
                        <a href="index.html" style=" display: inline-block;
            padding: 12px 30px;
            background-color: #ff9800; /* Orange color for the button */
            color: white;
            text-decoration: none;
            font-weight: bold;
            border-radius: 50px;
            transition: background-color 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            margin-top: 10px;" class="buy-now-btn">BUY NOW</a>
                    </div>
                </div>
            </div>

            <div style="    flex-shrink: 0; /* Slides don't shrink */
            width: 33.33%; /* Each slide takes 1/3 of the track width */
            padding: 0 10px; /* Space between the container edge and the slide content */" class="carousel-slide">
                <div style="   position: relative;
            height: 400px; /* Fixed height for the banner */
            border-radius: 15px;
            overflow: hidden;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: flex-end; 
            color: white;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);" class="banner" id="slide-3">
                    <div style="  position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 80%;
            display: flex;
            flex-direction: column;
            justify-content: flex-end; /* Align content to the bottom of the banner */
            align-items: center;
            text-align: center;
            padding: 0 20px 40px; /* Push content up from the bottom edge */" class="banner-content">
                        <h2 style="   font-size: 3em;
            font-weight: 800;
            margin-bottom: 30px;
            line-height: 1.0;" class="banner-title">COSMETICS</h2>
                        <p style="   font-size: 1.2em;
            font-weight: 500;
            margin-bottom: 20px;" class="banner-subtitle">PERSONAL CARE</p>
                        <p style="font-size: 0.9em;">Always applied your body protect & health Cosmetics</p>
                        <a href="index.html" style=" display: inline-block;
            padding: 12px 30px;
            background-color: #ff9800; /* Orange color for the button */
            color: white;
            text-decoration: none;
            font-weight: bold;
            border-radius: 50px;
            transition: background-color 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            margin-top: 10px;" class="buy-now-btn">BUY NOW</a>
                    </div>
                </div>
            </div>
            
        </div>

        <div style="position: absolute;  bottom: 35px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 10;" class="carousel-dots" id="carouselDots">
            <span style="width: 30px; /* Active dot is wider, as seen in the screenshots */
            border-radius: 5px;
            background-color: #388e3c; /* Green color for active dot */" class="dot active" data-slide="0"></span>
            <span style=" width: 10px;
            height: 10px;
            background-color: #ccc;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;" class="dot" data-slide="1"></span>
            <span style=" width: 10px;
            height: 10px;
            background-color: #ccc;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;" class="dot" data-slide="2"></span>
        </div>
    </div>

  <div style="   display:flex;
            flex-wrap: nowrap; /* CRITICAL: Ensures all items stay on one row */
            justify-content: space-around; /* Distribute space evenly */
            padding: 20px 10px;
            gap: 10px; 
            overflow-x: auto; /* Adds horizontal scrolling if they don't fit */
            -webkit-overflow-scrolling: touch; " class="category-links-container">
        
        <div style=" /* Ensures the box shrinks only down to a certain size, but doesn't grow */
            flex: 0 0 auto; 
            width: 100px; /* Adjusted size for better visibility */
            height: 100px;
            
            border-radius: 50%;
            overflow: hidden;
            text-align: center;
            /* Mimics the circular border/glow from the screenshots */
            box-shadow: 0 0 0 5px rgba(255, 255, 255, 0.8), 
                        0 0 0 6px #ccc; 
            transition: transform 0.3s;
            position: relative;
            background-color: white; " class="category-box">
            <a style="   display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            text-decoration: none;" href="index.html">
                <img style=" width: 90%; 
            height: 90%;
            object-fit: contain;
            border-radius: 50%;" src="./Cooking Tasks.jpg" alt="Al Fanar Gold Rice">
            </a>
        </div>

        <div style=" /* Ensures the box shrinks only down to a certain size, but doesn't grow */
            flex: 0 0 auto; 
            width: 100px; /* Adjusted size for better visibility */
            height: 100px;
            
            border-radius: 50%;
            overflow: hidden;
            text-align: center;
            /* Mimics the circular border/glow from the screenshots */
            box-shadow: 0 0 0 5px rgba(255, 255, 255, 0.8), 
                        0 0 0 6px #ccc; 
            transition: transform 0.3s;
            position: relative;
            background-color: white; " class="category-box">
            <a style="   display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            text-decoration: none;" href="index.html">
                <img style=" width: 90%; 
            height: 90%;
            object-fit: contain;
            border-radius: 50%;" src="./FoodItems2.jpg" alt="LG Electronics">
            </a>
        </div>
        
        <div style=" /* Ensures the box shrinks only down to a certain size, but doesn't grow */
            flex: 0 0 auto; 
            width: 100px; /* Adjusted size for better visibility */
            height: 100px;
            
            border-radius: 50%;
            overflow: hidden;
            text-align: center;
            /* Mimics the circular border/glow from the screenshots */
            box-shadow: 0 0 0 5px rgba(255, 255, 255, 0.8), 
                        0 0 0 6px #ccc; 
            transition: transform 0.3s;
            position: relative;
            background-color: white; " class="category-box">
            <a style="   display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            text-decoration: none;" href="index.html">
                <img style=" width: 90%; 
            height: 90%;
            object-fit: contain;
            border-radius: 50%;" src="./HealthCare.jpg" alt="Moulinex Appliances">
            </a>
        </div>

        <div style=" /* Ensures the box shrinks only down to a certain size, but doesn't grow */
            flex: 0 0 auto; 
            width: 100px; /* Adjusted size for better visibility */
            height: 100px;
            
            border-radius: 50%;
            overflow: hidden;
            text-align: center;
            /* Mimics the circular border/glow from the screenshots */
            box-shadow: 0 0 0 5px rgba(255, 255, 255, 0.8), 
                        0 0 0 6px #ccc; 
            transition: transform 0.3s;
            position: relative;
            background-color: white; " class="category-box">
            <a style="   display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            text-decoration: none;" href="index.html">
                <img style=" width: 90%; 
            height: 90%;
            object-fit: contain;
            border-radius: 50%;" src="./FoodItems2.jpg" alt="Skechers Shoes">
            </a>
        </div>
    </div>

    <div style="   text-align: center;
            padding-top: 10px; 
            padding-bottom: 20px;" class="centered-dot"></div>
    </div>





<script>
/* -------------------------
   Safe DOM ready wrapper
   ------------------------- */
(function(){
  // product data (editable)
  const defaultProducts = [
    { id:1, name:"Rooti Slice Cad...", price:1.00, image:"https://via.placeholder.com/600x400?text=Rooti+Slice", category:"Bread", tags:["slice","white"], description:"Fresh sliced white bread." },
    { id:2, name:"Rooti Qamadi...", price:1.00, image:"https://via.placeholder.com/600x400?text=Qamadi", category:"Bread", tags:["qamadi","brown"], description:"Soft brown qamadi bread." },
    { id:3, name:"Rooti Beegar...", price:0.50, image:"https://via.placeholder.com/600x400?text=Beegar", category:"Bread", tags:["beegar","round"], description:"Round beegar bread." },
    { id:4, name:"Ceesh (Arabic)", price:1.00, image:"https://via.placeholder.com/600x400?text=Ceesh", category:"Flatbread", tags:["arabic","ceesh"], description:"Arabic ceesh soft flatbread." }
  ];
  const extraProducts = [
    { id:5, name:"Pasta Italian", price:1.20, image:"https://via.placeholder.com/600x400?text=Pasta", category:"Food", tags:["pasta","italy"], description:"Premium Italian pasta." },
    { id:6, name:"Rice 5kg", price:5.00, image:"https://via.placeholder.com/600x400?text=Rice+5kg", category:"Rice", tags:["white","rice"], description:"High quality white rice." },
    { id:7, name:"Egg Pack", price:3.00, image:"https://via.placeholder.com/600x400?text=Eggs", category:"Dairy", tags:["egg","protein"], description:"Fresh farm eggs." }
  ];
  const allProducts = [...defaultProducts, ...extraProducts];

  // DOM elements
  const hamburger = document.getElementById("hamburgerBtn");
  const sideMenu = document.getElementById("sideMenu");
  const menuOverlay = document.getElementById("menuOverlay");
  const closeMenu = document.getElementById("closeMenu");
  const searchBtn = document.getElementById("searchBtn");
  const searchPanel = document.getElementById("searchPanel");
  const closeSearch = document.getElementById("closeSearch");
  const searchInput = document.getElementById("searchInput");
  const searchResults = document.getElementById("searchResults");
  const cartBtn = document.getElementById("cartBtn");
  const accountBtn = document.getElementById("accountBtn");
  const badge = document.getElementById("cartBadge");

  /* -------------------------
     Cart helpers (persistent)
     ------------------------- */
  function loadCart(){
    try{ return JSON.parse(localStorage.getItem("cartItems")) || []; } catch { return []; }
  }
  function saveCart(cart){
    localStorage.setItem("cartItems", JSON.stringify(cart));
  }
  function updateBadge(){
    const cart = loadCart();
    const total = cart.reduce((s,i)=> s + (i.qty||0), 0);
    if(total > 0){
      badge.style.display = "flex";
      badge.innerText = total;
    } else {
      badge.style.display = "none";
      badge.innerText = "0";
    }
    localStorage.setItem("cartCount", total);
  }
  // initialize badge on load
  updateBadge();

  /* -------------------------
     Quick add function
     ------------------------- */
  window.quickAdd = function(id){
    const product = allProducts.find(p => p.id == id);
    if(!product){ alert("Product not found"); return; }
    const cart = loadCart();
    const existing = cart.find(it => it.id == product.id);
    if(existing){
      existing.qty = (existing.qty || 0) + 1;
    } else {
      cart.push({
        id: product.id,
        name: product.name,
        img: product.image,
        price: parseFloat(product.price),
        qty: 1
      });
    }
    saveCart(cart);
    updateBadge();
    const short = product.name.length > 30 ? product.name.slice(0,28) + "…" : product.name;
    alert(short + " added to cart");
  };

  /* -------------------------
     Side menu handlers
     ------------------------- */
  function openMenu(){
    sideMenu.style.left = "0";
    menuOverlay.style.display = "block";
    sideMenu.setAttribute("aria-hidden","false");
  }
  function closeMenuFn(){
    sideMenu.style.left = "-320px";
    menuOverlay.style.display = "none";
    sideMenu.setAttribute("aria-hidden","true");
  }
  hamburger.addEventListener("click", openMenu);
  menuOverlay.addEventListener("click", closeMenuFn);
  closeMenu.addEventListener("click", closeMenuFn);

  /* -------------------------
     Search rendering
     ------------------------- */
  function escapeHtml(s){
    return String(s||'').replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
  }

  function renderProducts(list){
    if(!Array.isArray(list)) list = [];
    if(list.length === 0){
      searchResults.innerHTML = "<div style='padding:18px;color:#777'>No products found</div>";
      return;
    }
    const html = list.map(p => {
      return `
        <div class="product-card" data-id="${p.id}">
          <img src="${escapeHtml(p.image)}" alt="${escapeHtml(p.name)}">
          <div class="product-name">${escapeHtml(p.name)}</div>
          <div class="product-price">${escapeHtml(Number(p.price).toFixed(2))} birr</div>
          <button class="add-btn" onclick="quickAdd(${p.id})">Quick Add</button>
        </div>
      `;
    }).join("");
    searchResults.innerHTML = "<div class='products-grid'>"+html+"</div>";
  }

  function showDefaultProducts(){
    renderProducts(defaultProducts);
  }

  /* open/close search */
  searchBtn.addEventListener("click", function(){
    searchPanel.style.display = "block";
    searchPanel.setAttribute("aria-hidden","false");
    searchInput.value = "";
    showDefaultProducts();
    setTimeout(()=> searchInput.focus(), 120);
  });
  closeSearch.addEventListener("click", function(){
    searchPanel.style.display = "none";
    searchPanel.setAttribute("aria-hidden","true");
    searchResults.innerHTML = "";
    searchInput.value = "";
  });

  /* search input handler (match name, category, description, tags) */
  searchInput.addEventListener("input", function(){
    const q = (this.value || "").trim().toLowerCase();
    if(q === ""){
      showDefaultProducts();
      return;
    }
    const results = allProducts.filter(p => {
      return (p.name || "").toLowerCase().includes(q)
        || (p.category || "").toLowerCase().includes(q)
        || (p.description || "").toLowerCase().includes(q)
        || (p.tags || []).join(" ").toLowerCase().includes(q);
    });
    renderProducts(results);
  });

  /* -------------------------
     Navigation buttons
     ------------------------- */
  accountBtn.addEventListener("click", ()=> { window.location.href = "admin.html"; });
  cartBtn.addEventListener("click", ()=> { window.location.href = "cart.html"; });

  /* Expose updateBadge so other pages can call window.updateBadge() after adding */
  window.updateCartBadge = updateBadge;

})();


/*the slide*/
  const track = document.getElementById('carouselTrack');
        const slides = document.querySelectorAll('.carousel-slide');
        const dotsContainer = document.getElementById('carouselDots');
        const dots = document.querySelectorAll('.dot');
        const slideCount = slides.length;
        let currentIndex = 0;
        let autoInterval;

        /**
         * Moves the carousel track to the specified slide index.
         */
        function moveToSlide(index) {
            if (index < 0) {
                index = slideCount - 1;
            } else if (index >= slideCount) {
                index = 0;
            }

            currentIndex = index;
            const percentage = -(currentIndex * (100 / slideCount));
            track.style.transform = `translateX(${percentage}%)`;
            // Update dots
            dots.forEach((dot, i) => {
                dot.classList.remove('active');
                if (i === currentIndex) {
                    dot.classList.add('active');
                }
            });
        }

        /**
         * Starts the automatic sliding of the carousel.
         */
        function startAutoSlide() {
            clearInterval(autoInterval); 
            autoInterval = setInterval(() => {
                moveToSlide(currentIndex + 1);
            }, 5000); // Cycles every 5 seconds
        }

        // --- Event Listeners for Manual Control ---
        dotsContainer.addEventListener('click', (e) => {
            if (e.target.classList.contains('dot')) {
                const slideIndex = parseInt(e.target.getAttribute('data-slide'));
                moveToSlide(slideIndex);
                startAutoSlide(); // Reset timer on manual interaction
            }
        });

        // Manual Drag/Swipe Functionality (Touch and Mouse)
        let isDragging = false;
        let startPos = 0;
        let currentTranslate = 0;
        let prevTranslate = 0;

        function getClientX(e) {
            return e.touches ? e.touches[0].clientX : e.clientX;
        }

        function startDrag(e) {
            isDragging = true;
            startPos = getClientX(e);
            track.style.transition = 'none'; // Disable smooth transition while dragging
            clearInterval(autoInterval); // Pause auto-slide
        }

        function dragMove(e) {
            if (!isDragging) return;
            const currentPos = getClientX(e);
            currentTranslate = prevTranslate + currentPos - startPos;
            track.style.transform = `translateX(${currentTranslate}px)`;
        }
        
        function endDrag() {
            if (!isDragging) return;
            isDragging = false;
            track.style.transition = 'transform 0.5s ease-in-out'; // Restore transition

            const movedBy = currentTranslate - prevTranslate;
            const slideWidth = slides[0].offsetWidth;

            // Determine if a slide change should occur (more than 50px movement)
            if (movedBy < -50) { // Swiped left
                moveToSlide(currentIndex + 1);
            } else if (movedBy > 50) { // Swiped right
                moveToSlide(currentIndex - 1);
            } else {
                // Snap back to the current slide
                moveToSlide(currentIndex);
            }

            // Recalculate prevTranslate based on the new final position
            prevTranslate = -(currentIndex * slideWidth);
            startAutoSlide(); // Resume auto-slide
        }

        // Mouse listeners
        track.addEventListener('mousedown', startDrag);
        track.addEventListener('mousemove', dragMove);
        track.addEventListener('mouseup', endDrag);
        track.addEventListener('mouseleave', endDrag); 

        // Touch listeners
        track.addEventListener('touchstart', startDrag);
        track.addEventListener('touchmove', dragMove);
        track.addEventListener('touchend', endDrag);

        // Initialize carousel on load
        window.onload = () => {
            prevTranslate = -(currentIndex * slides[0].offsetWidth);
            startAutoSlide();
        };

        // Handle window resize to fix slide position
        window.addEventListener('resize', () => {
            moveToSlide(currentIndex);
            prevTranslate = -(currentIndex * slides[0].offsetWidth);
        });
</script>

</body>
</html>